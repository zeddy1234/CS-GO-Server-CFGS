;Stripper by Ryner The Wolf
;https://github.com/RynerWolf/csgo-cfgs

;change item strip weapons
modify:
{
    match:
    {
        "classname" "game_player_equip"
        "targetname" "kevlarui"
    }
    delete:
    {
        "weapon_p90" "999"
        "item_kevlar" "1"
    }
    insert:
    {
        "weapon_hegrenade" "1"
        "weapon_elite" "1"
        "weapon_bizon" "1"
        "item_assaultsuit" "1"
    }
    replace:
    {
        "spawnflags" "3"
    }
}

;(stage 1) fix boss attack not crushing players in the middle
modify:
{
	match:
	{
		"classname" "func_movelinear"
		"targetname" "1boss1move"
	}
	replace:
	{
		"blockdamage" "9999"
	}
}

;Add touch test triggers for ending rooms before progressing to next stage

;Stage 1
modify:
{
    match:
    {
        "hammerid" "111892"
    }
    delete:
    {
        "OnTrigger" "1nukeEnable145-1"
	"OnTrigger" "stage1fallonceEnable0-1"
    }
}

modify:
{
    match:
    {
        "hammerid" "104543"
    }
    delete:
    {
        "OnFullyOpen" "1endrelayTrigger0-1"
    }
    insert:
    {
        "OnFullyOpen" "Level_1_CheckerEnable0-1"
        "OnFullyOpen" "Level_1_CheckerTouchTest0.5-1"
    }
}

add:
{
    "targetname" "Level_1_Checker"
    "origin" "-7372 -5873 -11664"
    "filtername" "zombie"
    "classname" "trigger_multiple"
    "spawnflags" "1"
    "StartDisabled" "1"
    "OnTouching" "!selfTouchTest0.5-1"
    "OnTouching" "cmdCommandsay << KILL REMAINING ZOMBIES TO WIN >>31"
    "OnTouching" "cmdCommandsay << KILL REMAINING ZOMBIES TO WIN >>41"
    "OnTouching" "cmdCommandsay << KILL REMAINING ZOMBIES TO WIN >>51"
    "OnTouching" "Level_1_CT_WinDisable0-1"
    "OnNotTouching" "Level_1_CT_WinEnable0-1"
    "OnNotTouching" "!selfKill0.2-1"
}

add:
{
    "targetname" "Level_1_CT_Win"
    "origin" "-7372 -5873 -11664"
    "filtername" "human"
    "classname" "trigger_once"
    "spawnflags" "1"
    "StartDisabled" "1"
    "OnStartTouch" "cmdCommandsay << Earth Spirit Obtained ! >>01"
    "OnStartTouch" "cmdCommandsay << Chapter 1 Complete ! >>31"
    "OnStartTouch" "1endrelayTrigger01"
    "OnStartTouch" "1nukeEnable51"
}

modify:
{
    match:
    {
        "classname" "logic_auto"
	"hammerid" "27850"
    }
    insert:
    {
        "OnMapSpawn" "Level_1_*AddOutputsolid 20.51"
	"OnMapSpawn" "Level_1_*AddOutputmins -250 -235 -10011"
	"OnMapSpawn" "Level_1_*AddOutputmaxs 250 235 10011"
    }
}

;Stage 2
add:
{
    "targetname" "Level_2_Checker"
    "classname" "trigger_multiple"
    "StartDisabled" "1"
    "spawnflags" "1"
    "filtername" "zombie"
    "origin" "-2343 7222 -4282"
    "OnTouching" "!selfTouchTest0.5-1"
    "OnTouching" "cmdCommandsay << KILL REMAINING ZOMBIES TO WIN >>31"
    "OnTouching" "cmdCommandsay << KILL REMAINING ZOMBIES TO WIN >>41"
    "OnTouching" "cmdCommandsay << KILL REMAINING ZOMBIES TO WIN >>51"
    "OnTouching" "Level_2_CT_WinDisable0-1"
    "OnNotTouching" "Level_2_CT_WinEnable0-1"
    "OnNotTouching" "!selfKill0.2-1"
}
add:
{
    "targetname" "Level_2_CT_Win"
    "classname" "trigger_once"
    "StartDisabled" "1"
    "spawnflags" "1"
    "filtername" "human"
    "origin" "-2343 7222 -4282"
    "OnStartTouch" "cmdCommandsay << Water Spirit Obtained ! >>01"
    "OnStartTouch" "cmdCommandsay << Chapter 2 Complete ! >>31"
    "OnStartTouch" "2endrelayTrigger01"
    "OnStartTouch" "2nukeEnable51"
}

modify:
{
    match:
    {
        "classname" "logic_auto"
	"hammerid" "27850"
    }
    insert:
    {
        "OnMapSpawn" "Level_2_*AddOutputsolid 20.51"
	"OnMapSpawn" "Level_2_*AddOutputmins -330 -340 -10011"
	"OnMapSpawn" "Level_2_*AddOutputmaxs 330 340 10011"
    }
}

modify:
{
    match:
    {
        "hammerid" "288063"
    }
    delete:
    {
        "OnTrigger" "2nukeEnable130-1"
    }
}

modify:
{
    match:
    {
        "hammerid" "173754"
    }
    delete:
    {
        "OnFullyClosed" "2endrelayTrigger0-1"
    }
    insert:
    {
        "OnFullyClosed" "Level_2_CheckerTouchTest0.5-1"
    }
}

modify:
{
    match:
    {
        "hammerid" "288063"
    }
    insert:
    {
        "OnTrigger" "Level_2_CheckerEnable1201"
    }
}

;Stage 3
modify:
{
    match:
    {
        "hammerid" "433181"
    }
    delete:
    {
        "OnTrigger" "3nukeEnable160-1"
    }
}

add:
{
    "targetname" "Level_3_Checker"
    "classname" "trigger_multiple"
    "StartDisabled" "1"
    "spawnflags" "1"
    "filtername" "zombie"
    "origin" "12245 6287 -4670"
    "OnTouching" "!selfTouchTest0.5-1"
    "OnTouching" "cmdCommandsay << KILL REMAINING ZOMBIES TO WIN >>31"
    "OnTouching" "cmdCommandsay << KILL REMAINING ZOMBIES TO WIN >>41"
    "OnTouching" "cmdCommandsay << KILL REMAINING ZOMBIES TO WIN >>51"
    "OnTouching" "Level_3_CT_WinDisable0-1"
    "OnNotTouching" "Level_3_CT_WinEnable0-1"
    "OnNotTouching" "!selfKill0.2-1"
}
add:
{
    "targetname" "Level_3_CT_Win"
    "classname" "trigger_once"
    "StartDisabled" "1"
    "spawnflags" "1"
    "filtername" "human"
    "origin" "12245 6287 -4670"
    "OnStartTouch" "cmdCommandsay << Wind Spirit Obtained ! >>01"
    "OnStartTouch" "cmdCommandsay << Chapter 3 Complete ! >>31"
    "OnStartTouch" "stage3_brushEnable0-1"
    "OnStartTouch" "stage4_brushDisable0-1"
    "OnStartTouch" "3nukeEnable51"
}

modify:
{
    match:
    {
        "targetname" "3b3"
	"hammerid" "416299"
    }
    delete:
    {
        "OnBreak" "stage3_brushEnable0-1"
	"OnBreak" "stage4_brushDisable0-1"
    }
    insert:
    {
        "OnBreak" "Level_3_CheckerEnable1-1"
	"OnBreak" "Level_3_CheckerTouchTest1.5-1"
    }
}

modify:
{
    match:
    {
        "classname" "logic_auto"
	"hammerid" "27850"
    }
    insert:
    {
        "OnMapSpawn" "Level_3_*AddOutputsolid 20.51"
	"OnMapSpawn" "Level_3_*AddOutputmins -520 -495 -10011"
	"OnMapSpawn" "Level_3_*AddOutputmaxs 520 495 10011"
    }
}

;Stage 4
;Also modifies the inf ammo trigger to cover a bigger portion of the map
modify:
{
    match:
    {
        "hammerid" "592364"
    }
    delete:
    {
        "OnTrigger" "4nukeEnable265-1"
	"OnTrigger" "4endtptEnable245-1"
    }
    insert:
    {
	"OnTrigger" "Level_4_CheckerEnable2151"
	"OnTrigger" "4endtptEnable2501"
	"OnTrigger" "4nukeEnable2651"
    }
}

add:
{
    "model" "*23"
    "targetname" "Level_4_Checker"
    "classname" "trigger_multiple"
    "StartDisabled" "1"
    "spawnflags" "1"
    "filtername" "zombie"
    "origin" "3522 -9485 -5063"
    "OnStartTouch" "4nukeKill01"
    "OnStartTouch" "4endtptKill01"
    "OnStartTouch" "cmdCommandsay << ZOMBIES KILLED PHILIA >>01"
    "OnStartTouch" "cmdCommandsay << ZOMBIES KILLED PHILIA >>0.51"
    "OnStartTouch" "cmdCommandsay << ZOMBIES KILLED PHILIA >>11"
    "OnStartTouch" "cmdCommandsay << ZOMBIES KILLED PHILIA >>1.51"
    "OnStartTouch" "cmdCommandsay << YOU HAVE FAILED >>31"
    "OnStartTouch" "cmdCommandsay << YOU HAVE FAILED >>41"
    "OnStartTouch" "4endhurtAddOutputdamage 999951"
}

modify:
{
    match:
    {
        "classname" "logic_auto"
	"hammerid" "27850"
    }
    insert:
    {
        "OnMapSpawn" "Level_4_CheckerAddOutputsolid 20.51"
	"OnMapSpawn" "Level_4_CheckerAddOutputmins -200 -200 -10011"
	"OnMapSpawn" "Level_4_CheckerAddOutputmaxs 200 200 10011"
    }
}

modify:
{
    match:
    {
        "hammerid" "671316"
	"targetname" "4endhurt"
    }
    replace:
    {
        "origin" "3527.5 -9537 -4186"
	"model" "*24"
    }
}

modify:
{
    match:
    {
        "hammerid" "672166"
    }
    insert:
    {
        "OnStartTouch" "Level_4_CheckerKill01"
        "OnStartTouch" "cmdCommandsay << The World has been Cleansed >>21"
        "OnStartTouch" "cmdCommandsay << The World has been cleansed >>31"
        "OnStartTouch" "cmdCommandsay << Philia Thanks You >>51"
        "OnStartTouch" "cmdCommandsay << Philia Thanks You >>61"
        "OnStartTouch" "cmdCommandsay << MAP COMPLETE >>81"
        "OnStartTouch" "cmdCommandsay << MAP COMPLETE >>8.21"
        "OnStartTouch" "cmdCommandsay << MAP COMPLETE >>8.51"
	"OnStartTouch" "stage2_brushEnable7.11"
	"OnStartTouch" "stage1_brushDisable7.11"
	"OnStartTouch" "stage3_brushEnable7.11"
	"OnStartTouch" "stage4_brushEnable7.11"
    }
}

;Move these human items so people don't pick them early and become mother zombies
;Stage 2
modify:
{
    match:
    {
        "hammerid" "245824"
    }
    delete:
    {
        "OnTrigger" "earthdesAddOutputorigin -4174 7950 -43070-1"
	"OnTrigger" "healdesAddOutputorigin -4174 6496 -43070-1"
	"OnTrigger" "itemhealAddOutputorigin -4174 6496 -43070-1"
	"OnTrigger" "itemearthAddOutputorigin -4174 7950 -43070-1"
    }
    insert:
    {
	"OnTrigger" "healdesAddOutputorigin -4868 6774 -45530-1"
	"OnTrigger" "itemhealAddOutputorigin -4868 6774 -45530-1"
        "OnTrigger" "earthdesAddOutputorigin -4868 7680 -45530-1"
	"OnTrigger" "itemearthAddOutputorigin -4868 7680 -45530-1"
    }
}

;Stage 3
modify:
{
    match:
    {
        "hammerid" "433791"
	"targetname" "stage3relay"
    }
    delete:
    {
        "OnTrigger" "itemhealAddOutputorigin 8807 6289 -46890-1"
	"OnTrigger" "healdesAddOutputorigin 8807 6289 -46890-1"
	"OnTrigger" "earthdesAddOutputorigin 9479 5609 -46890-1"
	"OnTrigger" "itemwaterAddOutputorigin 9479 6969 -46890-1"
	"OnTrigger" "waterdesAddOutputorigin 9479 6969 -46890-1"
	"OnTrigger" "itemearthAddOutputorigin 9479 5609 -46890-1"
    }
    insert:
    {
        "OnTrigger" "itemhealAddOutputorigin 8807 6289 -19100-1"
	"OnTrigger" "healdesAddOutputorigin 8807 6289 -19100-1"
	"OnTrigger" "itemearthAddOutputorigin 9479 5609 -19100-1"
	"OnTrigger" "earthdesAddOutputorigin 9479 5609 -19100-1"
	"OnTrigger" "itemwaterAddOutputorigin 9479 6969 -19100-1"
	"OnTrigger" "waterdesAddOutputorigin 9479 6969 -19100-1"
    }
}

;Stage 4
modify:
{
    match:
    {
        "hammerid" "540507"
	"targetname" "stage4relay"
    }
    delete:
    {
        "OnTrigger" "itemwaterAddOutputorigin 1052 -9472 -50210-1"
	"OnTrigger" "waterdesAddOutputorigin 1052 -9472 -50210-1"
	"OnTrigger" "itemearthAddOutputorigin 3520.5 -11957 -50210-1"
	"OnTrigger" "itemhealAddOutputorigin 3520 -7021 -50210-1"
	"OnTrigger" "healdesAddOutputorigin 3520 -7021 -50210-1"
	"OnTrigger" "earthdesAddOutputorigin 3520.5 -11957 -50210-1"
	"OnTrigger" "itemwindAddOutputorigin 5988 -9472 -50210-1"
	"OnTrigger" "winddesAddOutputorigin 5988 -9472 -50210-1"
    }
    insert:
    {
        "OnTrigger" "itemhealAddOutputorigin 3525 -6170 -40150-1"
	"OnTrigger" "healdesAddOutputorigin 3525 -6170 -40150-1"
	"OnTrigger" "itemearthAddOutputorigin 3525 -12690 -40150-1"
	"OnTrigger" "earthdesAddOutputorigin 3525 -12690 -40150-1"
	"OnTrigger" "itemwaterAddOutputorigin 252 -9462 -40150-1"
	"OnTrigger" "waterdesAddOutputorigin 252 -9462 -40150-1"
	"OnTrigger" "itemwindAddOutputorigin 6737 -9462 -40150-1"
	"OnTrigger" "winddesAddOutputorigin 6737 -9462 -40150-1"
    }
}

;Compensate and delay tp for item moving
modify:
{
    match:
    {
	"targetname" "3m1"
        "hammerid" "307776"
    }
    delete:
    {
        "OnFullyOpen" "3afk1Enable3-1"
    }
    insert:
    {
	"OnFullyOpen" "3afk1Enable101"
        "OnFullyOpen" "cmdCommandsay << AFK Teleport in 10 seconds >>01"
    }
}

modify:
{
    match:
    {
        "hammerid" "380837"
    }
    delete:
    {
        "OnStartTouch" "3b1Open15-1"
	"OnStartTouch" "cmdCommandsay ***wait for 15 sec***0-1"
    }
    insert:
    {
        "OnStartTouch" "3b1Open201"
	"OnStartTouch" "cmdCommandsay << Path Opens in 20 Seconds >>01"
	"OnStartTouch" "cmdCommandsay << There! Look Ahead!..>>101"
	"OnStartTouch" "cmdCommandsay << It seems the Wind Spirit is trying to deter us... >>131"
    }
}

;fix issue where zombies got their weapons stripped even when they already have items
add:
{
    "targetname" "zmItemFilter_context"
    "ResponseContext" "zmItem_test"
    "Negated" "1"
    "classname" "filter_activator_context"
}

add:
{
    "targetname" "zmItem_block"
    "Negated" "0"
    "filtertype" "0"
    "Filter02" "zombie"
    "Filter01" "zmItemFilter_context"
    "classname" "filter_multi"
}

modify:
{
    match:
    {
        "classname" "weapon_knife"
        "targetname" "zm_speedk"
    }
    insert:
    {
        "OnPlayerPickup" "!activator,AddContext,zmItem_test:1,0,-1"
    }
}

modify:
{
    match:
    {
        "classname" "weapon_knife"
        "targetname" "zm_icek"
    }
    insert:
    {
        "OnPlayerPickup" "!activator,AddContext,zmItem_test:1,0,-1"
    }
}

modify:
{
    match:
    {
        "classname" "weapon_knife"
        "targetname" "zm_gravityk"
    }
    insert:
    {
        "OnPlayerPickup" "!activator,AddContext,zmItem_test:1,0,-1"
    }
}

modify:
{
    match:
    {
        "classname" "weapon_knife"
        "targetname" "zm_healk"
    }
    insert:
    {
        "OnPlayerPickup" "!activator,AddContext,zmItem_test:1,0,-1"
    }
}

modify:
{
    match:
    {
        "classname" "trigger_once"
        "hammerid" "678503"
    }
    replace:
    {
        "filtername" "zmItem_block"
    }
}

modify:
{
    match:
    {
        "classname" "trigger_once"
        "hammerid" "678541"
    }
    replace:
    {
        "filtername" "zmItem_block"
    }
}

modify:
{
    match:
    {
        "classname" "trigger_once"
        "hammerid" "678546"
    }
    replace:
    {
        "filtername" "zmItem_block"
    }
}

modify:
{
    match:
    {
        "classname" "trigger_once"
        "hammerid" "678553"
    }
    replace:
    {
        "filtername" "zmItem_block"
    }
}

;fix issue where humans got their weapons stripped even when they already have items
add:
{
    "targetname" "humanItemFilter_context"
    "ResponseContext" "humanItem_test"
    "Negated" "1"
    "classname" "filter_activator_context"
}

add:
{
    "targetname" "humanItem_block"
    "Negated" "0"
    "filtertype" "0"
    "Filter01" "humanItemFilter_context"
    "Filter02" "human"
    "classname" "filter_multi"
}


;Humans who already have items can't take additional item tps
modify:
{
    match:
    {
        "targetname" "nametpt"
    	"classname" "trigger_multiple"
    }
    delete:
    {
        "OnStartTouch" "!activatorAddOutputtargetname player0-1"
    }
}


modify:
{
    match:
    {
        "classname" "trigger_once"
	"hammerid" "125853"
    }
    insert:
    {
        "filtername" "humanItem_block"
    }
}

modify:
{
    match:
    {
        "classname" "trigger_once"
	"hammerid" "126318"
    }
    insert:
    {
        "filtername" "humanItem_block"
    }
}

modify:
{
    match:
    {
        "classname" "trigger_once"
	"hammerid" "443256"
    }
    insert:
    {
        "filtername" "humanItem_block"
    }
}

modify:
{
    match:
    {
        "classname" "trigger_once"
	"hammerid" "366397"
    }
    insert:
    {
        "filtername" "humanItem_block"
    }
}

modify:
{
    match:
    {
        "classname" "trigger_once"
	"hammerid" "365277"
    }
    insert:
    {
        "filtername" "humanItem_block"
    }
}

modify:
{
    match:
    {
        "classname" "trigger_once"
	"hammerid" "442449"
    }
    insert:
    {
        "filtername" "humanItem_block"
    }
}

modify:
{
    match:
    {
        "classname" "trigger_once"
	"hammerid" "624970"
    }
    insert:
    {
        "filtername" "humanItem_block"
    }
}

modify:
{
    match:
    {
        "classname" "trigger_once"
	"hammerid" "118207"
    }
    insert:
    {
        "filtername" "humanItem_block"
    }
}

modify:
{
    match:
    {
        "classname" "weapon_knife"
        "targetname" "flamek"
    }
    insert:
    {
        "OnPlayerPickup" "!activator,AddContext,humanItem_test:1,2,-1"
    }
}

modify:
{
    match:
    {
        "classname" "weapon_knife"
        "targetname" "windk"
    }
    insert:
    {
        "OnPlayerPickup" "!activator,AddContext,humanItem_test:1,2,-1"
    }
}

modify:
{
    match:
    {
        "classname" "weapon_knife"
        "targetname" "waterk"
    }
    insert:
    {
        "OnPlayerPickup" "!activator,AddContext,humanItem_test:1,2,-1"
    }
}

modify:
{
    match:
    {
        "classname" "weapon_knife"
        "targetname" "healk"
    }
    insert:
    {
        "OnPlayerPickup" "!activator,AddContext,humanItem_test:1,2,-1"
    }
}

modify:
{
    match:
    {
        "classname" "weapon_knife"
        "targetname" "earthk"
    }
    insert:
    {
        "OnPlayerPickup" "!activator,AddContext,humanItem_test:1,2,-1"
    }
}

;clear player contexts on round start
;add message to make players aware that map is MODIFIED
modify:
{
    match:
    {
        "classname" "logic_auto"
    }
    insert:
    {
        "OnMapSpawn" "playerClearContext0-1"
        "OnMapSpawn" "cmdCommandsay >> Stripper by RynerWolf <<31"
        "OnMapSpawn" "cmdCommandsay >> Thanks koen for some fixes <<51"
    }
}

;remove heal giving kevlar to players to resolve server lag
modify:
{
    match:
    {
        "classname" "trigger_hurt"
        "targetname" "healthrange"
    }
    delete:
    {
        "OnHurtPlayer" "addkevlaruse0-1"
    }
}

;change stage 2 boss push attacks to be less powerful to counter the missing particles
modify:
{
    match:
    {
        "classname" "trigger_push"
        "targetname" "2bossp1"
    }
    replace:
    {
        "speed" "400"
    }
}

modify:
{
    match:
    {
        "classname" "trigger_push"
        "targetname" "2bossp2"
    }
    replace:
    {
        "speed" "400"
    }
}

modify:
{
    match:
    {
        "classname" "trigger_push"
        "targetname" "2bossp3"
    }
    replace:
    {
        "speed" "400"
    }
}

modify:
{
    match:
    {
        "classname" "trigger_push"
        "targetname" "2bossp4"
    }
    replace:
    {
        "speed" "400"
    }
}

;Open the door faster after stage 3 boss for balancing
modify:
{
    match:
    {
        "targetname" "3bossendrelay"
        "classname" "logic_relay"
    }
    delete:
    {
        "OnTrigger" "3m2Open30-1"
    }
    insert:
    {
	"OnTrigger" "3m2Open0-1"
    }
}

;Fix people blocking stage 1 elevator
modify:
{
    match:
    {
        "targetname" "1m7"
	"hammerid" "86826"
    }
    replace:
    {
        "blockdamage" "9999"
    }
}

;Fix people blocking stage 2 final door
modify:
{
    match:
    {
        "targetname" "2m1"
	"hammerid" "173754"
    }
    replace:
    {
        "blockdamage" "9999"
    }
}


;Fix a bug where people falling into the water in stage 2 chamber will get tped to boss room early
modify:
{
    match:
    {
	"hammerid" "292594"
    }
    replace:
    {
	"target" "water_tp"
    }
}

add:
{
    "origin" "-7758 7226 -3420"
    "targetname" "water_tp"
    "spawnflags" "0"
    "angles" "0 180 0"
    "classname" "info_target"
}

;Fix a bug where the hp adder for stage 3 miniboss doesn't get killed
modify:
{
    match:
    {
	"hammerid" "380931"
    }
    insert:
    {
	"targetname" "mini_boss_hp_add"
    }
}

modify:
{
    match:
    {
	"targetname" "3math1"
	"hammerid" "380900"
    }
    insert:
    {
	"OnHitMin" "mini_boss_hp_addKill01"
    }
}

;Fix a tp avoidance spot on stage 1
add:
{
    "model" "*1"
    "UseLandmarkAngles" "0"
    "targetname" "1afk6"
    "target" "des4"
    "StartDisabled" "1"
    "spawnflags" "4097"
    "origin" "-7313 -1399 -5257"
    "CheckDestIfClearForPlayer" "0"
    "classname" "trigger_teleport"
}

modify:
{
    match:
    {
        "hammerid" "111892"
    }
    insert:
    {
       "OnTrigger" "1afk5Enable251"
    }
}

;Rework stage 1 after-boss tp locations for humans, this now teleports them evenly to 1 of the 3 floors.

filter:
{
    "targetname" "1target1"
    "hammerid" "103631"
}

add:
{
    "targetname" "1target1"
    "angles" "0 0 0"
    "classname" "info_teleport_destination"
    "origin" "-10233 -3135 -12154"
}

add:
{
    "targetname" "1target1"
    "angles" "0 0 0"
    "classname" "info_teleport_destination"
    "origin" "-10214 -3836 -11791"
}

add:
{
    "targetname" "1target1"
    "angles" "0 0 0"
    "classname" "info_teleport_destination"
    "origin" "-10216 -4556 -11249"
}

modify:
{
    match:
    {
	"targetname" "1tpt2"
	"hammerid" "103660"
    }
    delete:
    {
	"landmark" "1tpt2"
	"OnStartTouch" "fog1TurnOff0-1"
    }
    replace:
    {
	"UseLandmarkAngles" "1"
    }
    insert:
    {
	"OnStartTouch" "fog1TurnOff01"
    }
}

;Fix a tp avoidance spot on stage 2
add:
{
    "model" "*1"
    "UseLandmarkAngles" "0"
    "targetname" "2afk2"
    "target" "des3"
    "StartDisabled" "1"
    "spawnflags" "4097"
    "origin" "-5933 7215 -4428"
    "CheckDestIfClearForPlayer" "0"
    "classname" "trigger_teleport"
}

;Nerf stage 3 miniboss push so it's no longer an insta fail even if humans run out of time
modify:
{
    match:
    {
        "targetname" "3p4"
	"classname" "trigger_push"
    }
    replace:
    {
        "speed" "275"
    }
}

;Move the zm tp further down so humans don't get knifed while being boosted to stage 3 boss
add:
{
    "model" "*1"
    "UseLandmarkAngles" "0"
    "targetname" "air_boss_tp"
    "target" "des1"
    "StartDisabled" "1"
    "spawnflags" "4097"
    "origin" "7474 6292 745"
    "filtername" "zombie"
    "CheckDestIfClearForPlayer" "0"
    "classname" "trigger_teleport"
}

modify:
{
    match:
    {
        "hammerid" "380900"
    }
    insert:
    {
        "OnHitMin" "air_boss_tpEnable101"
    }
}

modify:
{
    match:
    {
        "hammerid" "433181"
	"targetname" "3bossendrelay"
    }
    insert:
    {
        "OnTrigger" "air_boss_tpKill01"
    }
}

;Move stage 3 boss so people don't get blinded by the sun while shooting it lol
modify:
{
    match:
    {
        "targetname" "3math1"
	"hammerid" "380900"
    }
    insert:
    {
        "OnHitMin" "3bosstrackAddOutputorigin 7500 6305 486024.91"
        "OnHitMin" "3bosshitboxAddOutputorigin 7500 6305 486024.91"
    }
}

;Workaround fix for stage 3 unpacked wind particle by replacing it with similar looking particle
modify:
{
    match:
    {
        "targetname" "3ptc1"
	"classname" "info_particle_system"
    }
    replace:
    {
        "effect_name" "3ptc2"
    }
}

;Workaround fix for unpacked wind item particle by replacing it with similar looking particle
modify:
{
    match:
    {
        "targetname" "windpushptc"
	"classname" "info_particle_system"
    }
    replace:
    {
        "effect_name" "3ptc2"
    }
}

;Fix miniboss still making a breakable sound even when it's already dead
modify:
{
    match:
    {
        "targetname" "3math1"
	"classname" "math_counter"
    }
    insert:
    {
        "OnHitMin" "3hit1Kill01"
    }
}


;Fix lava on stage 4 killing zombies
add:
{
    "model" "*65"
    "UseLandmarkAngles" "0"
    "targetname" "anti_lava"
    "target" "des1"
    "filtername" "zombie"
    "StartDisabled" "0"
    "spawnflags" "4097"
    "origin" "3519.5 -9489 -5157"
    "CheckDestIfClearForPlayer" "0"
    "classname" "trigger_teleport"
}

;Fix people blocking stage 4 elevator
modify:
{
    match:
    {
        "targetname" "4m3"
	"classname" "func_movelinear"
    }
    replace:
    {
        "blockdamage" "99999"
    }
}

;Stage 4 balancing when the elevator goes down to delay zombies abit
;It's dumb when zombies can jump down immediately as the elevator is very slow
add:
{
    "model" "*42"
    "targetname" "philia_protect"
    "filtername" "zombie"
    "StartDisabled" "1"
    "spawnflags" "4097"
    "origin" "3519.5 -9492.5 -3400"
    "CheckDestIfClearForPlayer" "0"
    "classname" "trigger_multiple"
    "OnStartTouch" "!activatorAddOutputorigin 4191 -9492 -30000-1"
}

modify:
{
    match:
    {
        "targetname" "4bossendrelay"
	"hammerid" "592364"
    }
    insert:
    {
        "OnTrigger" "cmdCommandsay << Philia will Protect us for 10 seconds ! >>1301"
        "OnTrigger" "philia_protectEnable1301"
        "OnTrigger" "philia_protectKill1401"
    }
}

;Stage 4 finale balancing so players can't just jump straight down to the middle
add:
{
    "model" "*42"
    "UseLandmarkAngles" "0"
    "targetname" "anti_skip_tp"
    "target" "des3"
    "StartDisabled" "1"
    "spawnflags" "4097"
    "origin" "3520 -9489 -4201"
    "CheckDestIfClearForPlayer" "0"
    "classname" "trigger_teleport"
}

modify:
{
    match:
    {
        "classname" "logic_auto"
    }
    insert:
    {
        "OnMapSpawn" "anti_skip_tpAddOutputsolid 20.51"
	"OnMapSpawn" "anti_skip_tpAddOutputmins -1900 -1900 -5011"
	"OnMapSpawn" "anti_skip_tpAddOutputmaxs 1900 1900 5011"
    }
}

modify:
{
    match:
    {
        "targetname" "4bossendrelay"
	"hammerid" "592364"
    }
    insert:
    {
        "OnTrigger" "anti_skip_tpEnable1751"
    }
}

add:
{
    "targetname" "final_dt"
    "angles" "0 0 0"
    "classname" "info_teleport_destination"
    "origin" "1052 -9472 -5021"
}

add:
{
    "targetname" "final_dt"
    "angles" "0 90 0"
    "classname" "info_teleport_destination"
    "origin" "3520.5 -11957 -5021"
}

add:
{
    "targetname" "final_dt"
    "angles" "0 -90 0"
    "classname" "info_teleport_destination"
    "origin" "3520 -7021 -5021"
}

add:
{
    "targetname" "final_dt"
    "angles" "0 180 0"
    "classname" "info_teleport_destination"
    "origin" "5988 -9472 -5021"
}

modify:
{
    match:
    {
        "targetname" "4bossendrelay"
	"hammerid" "592364"
    }
    insert:
    {
        "OnTrigger" "4afk2AddOutputtarget final_dt2041"
        "OnTrigger" "4afk2Enable2051"
        "OnTrigger" "cmdCommandsay << AFK Teleport in 15 Seconds ! >>1901"
    }
}

;Stage names
add:
{
    "origin" "2 2 2"
    "y" "0.06"
    "x" "-1"
    "targetname" "chapter_gametext"
    "spawnflags" "1"
    "message" "???"
    "holdtime" "5"
    "fxtime" "0.25"
    "fadeout" "2"
    "fadein" "1.5"
    "effect" "1"
    "color2" "0 0 0"
    "color" "255 0 0"
    "channel" "0"
    "classname" "game_text"
    "OnUser1" "!selfDisplay0-1"
    "OnUser1" "!selfFireUser15-1"
}

modify:
{
    match:
    {
        "hammerid" "112160"
    }
    insert:
    {
        "OnTrigger" "chapter_gametextAddOutputcolor 255 255 091"
        "OnTrigger" "chapter_gametextAddOutputmessage << EARTH >>9.11"
        "OnTrigger" "chapter_gametextFireUser19.21"
    }
}

modify:
{
    match:
    {
        "hammerid" "245824"
    }
    insert:
    {
        "OnTrigger" "chapter_gametextAddOutputcolor 0 255 25591"
        "OnTrigger" "chapter_gametextAddOutputmessage << WATER >>9.11"
        "OnTrigger" "chapter_gametextFireUser19.21"
    }
}

modify:
{
    match:
    {
        "hammerid" "433791"
    }
    insert:
    {
        "OnTrigger" "chapter_gametextAddOutputcolor 0 255 091"
        "OnTrigger" "chapter_gametextAddOutputmessage << WIND >>9.11"
        "OnTrigger" "chapter_gametextFireUser19.21"
    }
}

modify:
{
    match:
    {
        "hammerid" "540507"
    }
    insert:
    {
        "OnTrigger" "chapter_gametextAddOutputcolor 255 0 091"
        "OnTrigger" "chapter_gametextAddOutputmessage << FIRE >>9.11"
        "OnTrigger" "chapter_gametextFireUser19.21"
    }
}

modify:
{
    match:
    {
        "hammerid" "592364"
    }
    insert:
    {
        "OnTrigger" "chapter_gametextAddOutputcolor 255 255 2551801"
        "OnTrigger" "chapter_gametextAddOutputmessage << PHILIA >>180.11"
        "OnTrigger" "chapter_gametextFireUser1180.21"
    }
}

;Ending lyrics segment
add:
{
    "origin" "5 5 5"
    "y" "0.15"
    "x" "-1"
    "targetname" "EndingLyrics"
    "message" "BGM : LiSA - Homura (炎)"
    "spawnflags" "1"
    "holdtime" "10"
    "fxtime" "0.25"
    "fadeout" "0.5"
    "fadein" "0.1"
    "effect" "1"
    "color2" "0 0 0"
    "color" "0 255 255"
    "channel" "3"
    "classname" "game_text"
}

add:
{
    "origin" "6 6 6"
    "targetname" "EndingSong_Relay"
    "StartDisabled" "0"
    "spawnflags" "0"
    "classname" "logic_relay"
    "OnTrigger" "EndingLyricsAddOutputmessage I Reached Out To Hug A Bundle Of Fierce Light0-1"
    "OnTrigger" "EndingLyricsAddOutputmessage For The Future That Shines & Disappears7-1"
    "OnTrigger" "EndingLyricsAddOutputmessage Beyond The Entrusted Happiness & Promises13.4-1"
    "OnTrigger" "EndingLyricsAddOutputmessage I'll Go Without Looking Back20.5-1"
    "OnTrigger" "EndingLyricsAddOutputmessage I'll Just Look Forward & Shout27.4-1"
    "OnTrigger" "EndingLyricsAddOutputmessage Set Your Heart Ablaze33.6-1"
    "OnTrigger" "EndingLyricsAddOutputmessage Until That Distant Future...39.2-1"
    "OnTrigger" "EndingLyricsDisplay0.1-1"
    "OnTrigger" "EndingLyricsDisplay7.1-1"
    "OnTrigger" "EndingLyricsDisplay13.5-1"
    "OnTrigger" "EndingLyricsDisplay20.6-1"
    "OnTrigger" "EndingLyricsDisplay27.5-1"
    "OnTrigger" "EndingLyricsDisplay33.7-1"
    "OnTrigger" "EndingLyricsDisplay39.3-1"
}

modify:
{
    match:
    {
        "hammerid" "592364"
    }
    insert:
    {
        "OnTrigger" "EndingLyricsDisplay61"
        "OnTrigger" "EndingSong_RelayTrigger2011"
    }
}

;Rework bad map messages
modify:
{
    match:
    {
        "hammerid" "112160"
    }
    insert:
    {
        "OnTrigger" "cmdCommandsay << Chapter 1 : Earth >>91"
    }
}

modify:
{
    match:
    {
        "hammerid" "23758"
    }
    delete:
    {
        "OnStartTouch" "cmdCommandsay ***wait for 20 sec***10-1"
	"OnStartTouch" "cmdCommandsay ***wait for 10 sec***20-1"
    }
    insert:
    {
        "OnStartTouch" "cmdCommandsay << Doors open in 20 seconds >>101"
    }
}

modify:
{
    match:
    {
        "hammerid" "22880"
    }
    delete:
    {
        "OnStartTouch" "cmdCommandsay ***wait for 15 sec***10-1"
	"OnStartTouch" "cmdCommandsay ***wait for 25 sec***0-1"
    }
    insert:
    {
	"OnStartTouch" "cmdCommandsay << Door opens in 25 seconds >>01"
	"OnStartTouch" "cmdCommandsay << AFK Teleport in 20 seconds >>301"
	"OnStartTouch" "cmdCommandsay << The next door seems to be sealed..? >>321"
	"OnStartTouch" "cmdCommandsay << Find a way to open it... >>341"
    }
}

modify:
{
    match:
    {
        "hammerid" "23789"
    }
    insert:
    {
	"OnPressed" "cmdCommandsay << Button 1 Pressed! >>01"
    }
}

modify:
{
    match:
    {
        "hammerid" "23849"
    }
    insert:
    {
	"OnPressed" "cmdCommandsay << Button 2 Pressed! >>01"
    }
}

modify:
{
    match:
    {
        "hammerid" "23865"
    }
    delete:
    {
        "OnHitMax" "cmdCommandsay ***wait for 10 sec***10-1"
        "OnHitMax" "cmdCommandsay ***wait for 20 sec***0-1"
    }
    insert:
    {
        "OnHitMax" "cmdCommandsay << You did it! >>21"
        "OnHitMax" "cmdCommandsay << Door opens in 15 seconds >>51"
        "OnHitMax" "cmdCommandsay << AFK Teleport in 20 Seconds >>251"
    }
}

modify:
{
    match:
    {
        "hammerid" "63418"
    }
    delete:
    {
        "OnStartTouch" "cmdCommandsay ***wait for 25 sec***0-1"
    }
    insert:
    {
        "OnStartTouch" "cmdCommandsay << Door opens in 25 seconds >>01"
        "OnStartTouch" "cmdCommandsay << AFK Teleport in 15 seconds >>271"
    }
}

modify:
{
    match:
    {
        "hammerid" "63308"
    }
    delete:
    {
        "OnStartTouch" "cmdCommandsay ***wait for 20 sec***0-1"
    }
    insert:
    {
        "OnStartTouch" "cmdCommandsay << Platform rises in 20 seconds >>01"
    }
}

modify:
{
    match:
    {
        "targetname" "1tpt1"
	"hammerid" "87159"
    }
    insert:
    {
        "OnStartTouch" "cmdCommandsay << GET OFF THE PLATFORM >>81"
        "OnStartTouch" "cmdCommandsay << GET OFF THE PLATFORM >>91"
        "OnStartTouch" "cmdCommandsay << GET OFF THE PLATFORM >>101"
        "OnStartTouch" "cmdCommandsay << GET OFF THE PLATFORM >>111"
        "OnStartTouch" "cmdCommandsay << AFK Teleport in 10 seconds >>61"
        "OnStartTouch" "cmdCommandsay << GET ON THE PLATFORM >>671"
        "OnStartTouch" "cmdCommandsay << GET ON THE PLATFORM >>681"
    }
}

modify:
{
    match:
    {
        "hammerid" "86826"
    }
    insert:
    {
        "OnFullyOpen" "cmdCommandsay << It's the Earth Spirit ! >>01"
        "OnFullyOpen" "cmdCommandsay << We need to defeat it ! >>21"
    }
}

modify:
{
    match:
    {
        "hammerid" "110690"
    }
    insert:
    {
        "OnHitMax" "cmdCommandsay << The Spirit is Shielded for 15 seconds ! >>01"
        "OnHitMax" "cmdCommandsay << Don't let down your guard ! >>51"
        "OnHitMax" "cmdCommandsay << It's not over yet ! >>81"
        "OnHitMax" "cmdCommandsay << The Shield is broken ! Attack Now ! >>151"
    }
}

modify:
{
    match:
    {
        "hammerid" "111892"
    }
    insert:
    {
        "OnTrigger" "cmdCommandsay << The Spirit is defeated ! >>01"
        "OnTrigger" "cmdCommandsay << Pick up the Earth Spirit ! >>21"
        "OnTrigger" "cmdCommandsay << Return it to its Crystal ! >>51"
        "OnTrigger" "cmdCommandsay << Door Opens in 30 Seconds ! >>201"
        "OnTrigger" "cmdCommandsay << Door Opens in 30 Seconds ! >>601"
        "OnTrigger" "cmdCommandsay << Final Gates close in 30 Seconds ! >>1001"
        "OnTrigger" "cmdCommandsay << DO NOT LET ZOMBIES NEAR THE WHITE CRYSTAL ! >>1051"
        "OnTrigger" "cmdCommandsay << DO NOT LET ZOMBIES NEAR THE WHITE CRYSTAL ! >>1061"
        "OnTrigger" "cmdCommandsay << DO NOT LET ZOMBIES NEAR THE WHITE CRYSTAL ! >>1071"
        "OnTrigger" "cmdCommandsay << AFK Teleport in 5 Seconds ! >>521"
        "OnTrigger" "cmdCommandsay << AFK Teleport in 10 Seconds ! >>951"
    }
}

modify:
{
    match:
    {
        "hammerid" "109941"
    }
    delete:
    {
	"OnTrigger" "cmdCommandsay ***earthquake***0-1"
    }
    insert:
    {
        "OnTrigger" "cmdCommandsay << EARTHQUAKE >>0-1"
        "OnTrigger" "cmdCommandsay << GO TO CORNERS >>1-1"
        "OnTrigger" "cmdCommandsay << GO TO CORNERS >>2-1"
    }
}

modify:
{
    match:
    {
        "hammerid" "110867"
    }
    delete:
    {
	"OnTrigger" "cmdCommandsay ***earthquake***0-1"
    }
    insert:
    {
        "OnTrigger" "cmdCommandsay << EARTHQUAKE >>0-1"
        "OnTrigger" "cmdCommandsay << GO TO CORNERS >>1-1"
        "OnTrigger" "cmdCommandsay << GO TO CORNERS >>2-1"
    }
}

modify:
{
    match:
    {
        "hammerid" "110871"
    }
    delete:
    {
	"OnTrigger" "cmdCommandsay ***earthdust***0-1"
    }
    insert:
    {
        "OnTrigger" "cmdCommandsay << EARTHDUST >>0-1"
        "OnTrigger" "cmdCommandsay << HUG PILLARS >>1-1"
        "OnTrigger" "cmdCommandsay << HUG PILLARS >>2-1"
    }
}

modify:
{
    match:
    {
        "hammerid" "110015"
    }
    delete:
    {
	"OnTrigger" "cmdCommandsay ***earthdust***0-1"
    }
    insert:
    {
        "OnTrigger" "cmdCommandsay << EARTHDUST >>0-1"
        "OnTrigger" "cmdCommandsay << HUG PILLARS >>1-1"
        "OnTrigger" "cmdCommandsay << HUG PILLARS >>2-1"
    }
}

modify:
{
    match:
    {
        "hammerid" "109991"
    }
    delete:
    {
	"OnTrigger" "cmdCommandsay ***dustknock***0-1"
    }
    insert:
    {
        "OnTrigger" "cmdCommandsay << DUSTKNOCK >>0-1"
        "OnTrigger" "cmdCommandsay << RUN TO THE SPIRIT >>1-1"
        "OnTrigger" "cmdCommandsay << RUN TO THE SPIRIT >>2-1"
    }
}

modify:
{
    match:
    {
        "hammerid" "110869"
    }
    delete:
    {
	"OnTrigger" "cmdCommandsay ***dustknock***0-1"
    }
    insert:
    {
        "OnTrigger" "cmdCommandsay << DUSTKNOCK >>0-1"
        "OnTrigger" "cmdCommandsay << RUN TO THE SPIRIT >>1-1"
        "OnTrigger" "cmdCommandsay << RUN TO THE SPIRIT >>2-1"
    }
}

modify:
{
    match:
    {
        "hammerid" "110865"
    }
    delete:
    {
	"OnTrigger" "cmdCommandsay ***collapse***0-1"
    }
    insert:
    {
        "OnTrigger" "cmdCommandsay << COLLAPSE >>0-1"
        "OnTrigger" "cmdCommandsay << LOOK UP >>1-1"
        "OnTrigger" "cmdCommandsay << LOOK UP >>2-1"
    }
}

modify:
{
    match:
    {
        "hammerid" "107505"
    }
    delete:
    {
	"OnTrigger" "cmdCommandsay ***collapse***0-1"
    }
    insert:
    {
        "OnTrigger" "cmdCommandsay << COLLAPSE >>0-1"
        "OnTrigger" "cmdCommandsay << LOOK UP >>1-1"
        "OnTrigger" "cmdCommandsay << LOOK UP >>2-1"
    }
}

modify:
{
    match:
    {
        "hammerid" "110443"
    }
    delete:
    {
	"OnTrigger" "cmdCommandsay ***earth shock***0-1"
    }
    insert:
    {
        "OnTrigger" "cmdCommandsay << EARTH SHOCK >>0-1"
        "OnTrigger" "cmdCommandsay << DODGE WALLS >>1-1"
        "OnTrigger" "cmdCommandsay << DODGE WALLS >>2-1"
    }
}

modify:
{
    match:
    {
        "hammerid" "110873"
    }
    delete:
    {
	"OnTrigger" "cmdCommandsay ***earth shock***0-1"
    }
    insert:
    {
        "OnTrigger" "cmdCommandsay << EARTH SHOCK >>0-1"
        "OnTrigger" "cmdCommandsay << DODGE WALLS >>1-1"
        "OnTrigger" "cmdCommandsay << DODGE WALLS >>2-1"
    }
}

modify:
{
    match:
    {
        "hammerid" "245824"
    }
    insert:
    {
	"OnTrigger" "cmdCommandsay << Chapter 2 : Water >>91"
    }
}

modify:
{
    match:
    {
        "hammerid" "245824"
    }
    insert:
    {
	"OnTrigger" "cmdCommandsay << That Crystal Looks Ominous... >>111"
    }
}

modify:
{
    match:
    {
        "hammerid" "158074"
    }
    delete:
    {
	"OnPressed" "cmdCommandsay ***wait for 25 sec***0-1"
    }
    insert:
    {
	"OnPressed" "cmdCommandsay << Door Opens in 25 seconds >>01"
	"OnPressed" "cmdCommandsay << This must be the Water Temple >>51"
	"OnPressed" "cmdCommandsay << It is here we will find the Water Spirit >>71"
	"OnPressed" "cmdCommandsay << Always be on your guard ! >>101"
    }
}

modify:
{
    match:
    {
        "hammerid" "292635"
    }
    delete:
    {
	"OnTrigger" "cmdCommandsay ***wait for 25 sec***0-1"
    }
    insert:
    {
	"OnTrigger" "cmdCommandsay << Doors Open in 25 Seconds >>01"
	"OnTrigger" "cmdCommandsay << It seems we need to split here... >>51"
	"OnTrigger" "cmdCommandsay << AFK Teleport in 10 seconds >>151"
    }
}

modify:
{
    match:
    {
        "hammerid" "223771"
    }
    delete:
    {
	"OnStartTouch" "cmdCommandsay ***wait for 25sec***0-1"
    }
    insert:
    {
	"OnStartTouch" "cmdCommandsay << Chamber door opens in 25 seconds >>01"
	"OnStartTouch" "cmdCommandsay << A platform is coming down... >>291"
	"OnStartTouch" "cmdCommandsay << What awaits us at the top..? >>321"
    }
}

modify:
{
    match:
    {
        "hammerid" "219588"
    }
    insert:
    {
	"OnFullyOpen" "cmdCommandsay << Platform leaves in 20 seconds >>101"
	"OnFullyOpen" "cmdCommandsay << It's the Water Spirit ! >>381"
	"OnFullyOpen" "cmdCommandsay << Get ready to fight ! >>401"
    }
}

modify:
{
    match:
    {
        "hammerid" "264671"
    }
    delete:
    {
	"OnTrigger" "cmdCommandsay ***waterpush***0-1"
    }
    insert:
    {
	"OnTrigger" "cmdCommandsay << WATERPUSH >>0-1"
	"OnTrigger" "cmdCommandsay << STAY AWAY FROM SPIRIT >>1-1"
	"OnTrigger" "cmdCommandsay << STAY AWAY FROM SPIRIT >>2-1"
    }
}

modify:
{
    match:
    {
        "hammerid" "265005"
    }
    delete:
    {
	"OnTrigger" "cmdCommandsay ***waterpush***0-1"
    }
    insert:
    {
	"OnTrigger" "cmdCommandsay << WATERPUSH >>0-1"
	"OnTrigger" "cmdCommandsay << STAY AWAY FROM SPIRIT >>1-1"
	"OnTrigger" "cmdCommandsay << STAY AWAY FROM SPIRIT >>2-1"
    }
}

modify:
{
    match:
    {
        "hammerid" "265003"
    }
    delete:
    {
	"OnTrigger" "cmdCommandsay ***icefall***0-1"
    }
    insert:
    {
	"OnTrigger" "cmdCommandsay << ICEFALL >>0-1"
	"OnTrigger" "cmdCommandsay << LOOK UP >>1-1"
	"OnTrigger" "cmdCommandsay << LOOK UP >>2-1"
    }
}

modify:
{
    match:
    {
        "hammerid" "264669"
    }
    delete:
    {
	"OnTrigger" "cmdCommandsay ***icefall***0-1"
    }
    insert:
    {
	"OnTrigger" "cmdCommandsay << ICEFALL >>0-1"
	"OnTrigger" "cmdCommandsay << LOOK UP >>1-1"
	"OnTrigger" "cmdCommandsay << LOOK UP >>2-1"
    }
}

modify:
{
    match:
    {
        "hammerid" "264999"
    }
    delete:
    {
	"OnTrigger" "cmdCommandsay ***snowstorm***0-1"
    }
    insert:
    {
	"OnTrigger" "cmdCommandsay << SNOWSTORM >>0-1"
	"OnTrigger" "cmdCommandsay << USE HEAL IF NECESSARY >>1-1"
    }
}

modify:
{
    match:
    {
        "hammerid" "264665"
    }
    delete:
    {
	"OnTrigger" "cmdCommandsay ***snowstorm***0-1"
    }
    insert:
    {
	"OnTrigger" "cmdCommandsay << SNOWSTORM >>0-1"
	"OnTrigger" "cmdCommandsay << USE HEAL IF NECESSARY >>1-1"
    }
}

modify:
{
    match:
    {
        "hammerid" "264667"
    }
    delete:
    {
	"OnTrigger" "cmdCommandsay ***poisonwater***0-1"
    }
    insert:
    {
	"OnTrigger" "cmdCommandsay << POISON WATER >>0-1"
	"OnTrigger" "cmdCommandsay << GO SIDES >>1-1"
	"OnTrigger" "cmdCommandsay << GO SIDES >>2-1"
    }
}

modify:
{
    match:
    {
        "hammerid" "265001"
    }
    delete:
    {
	"OnTrigger" "cmdCommandsay ***poisonwater***0-1"
    }
    insert:
    {
	"OnTrigger" "cmdCommandsay << POISON WATER >>0-1"
	"OnTrigger" "cmdCommandsay << GO SIDES >>1-1"
	"OnTrigger" "cmdCommandsay << GO SIDES >>2-1"
    }
}

modify:
{
    match:
    {
        "hammerid" "264681"
    }
    delete:
    {
	"OnTrigger" "cmdCommandsay ***surge***0-1"
    }
    insert:
    {
	"OnTrigger" "cmdCommandsay << SURGE >>0-1"
	"OnTrigger" "cmdCommandsay << STAY AWAY FROM THE SPIRIT >>1-1"
	"OnTrigger" "cmdCommandsay << STAY AWAY FROM THE SPIRIT >>2-1"
    }
}

modify:
{
    match:
    {
        "hammerid" "264997"
    }
    delete:
    {
	"OnTrigger" "cmdCommandsay ***surge***0-1"
    }
    insert:
    {
	"OnTrigger" "cmdCommandsay << SURGE >>0-1"
	"OnTrigger" "cmdCommandsay << STAY AWAY FROM THE SPIRIT >>1-1"
	"OnTrigger" "cmdCommandsay << STAY AWAY FROM THE SPIRIT >>2-1"
    }
}

modify:
{
    match:
    {
        "hammerid" "287801"
    }
    insert:
    {
        "OnHitMax" "cmdCommandsay << The Spirit is Shielded for 10 seconds ! >>01"
        "OnHitMax" "cmdCommandsay << Don't let down your guard ! >>41"
        "OnHitMax" "cmdCommandsay << It's not over yet ! >>71"
        "OnHitMax" "cmdCommandsay << The Shield is broken ! Attack Now ! >>101"
    }
}

modify:
{
    match:
    {
        "hammerid" "288063"
    }
    insert:
    {
        "OnTrigger" "cmdCommandsay << The Spirit is Defeated ! >>01"
        "OnTrigger" "cmdCommandsay << Take the Water Spirit ! >>31"
        "OnTrigger" "cmdCommandsay << We need to return it to the Crystal ! >>71"
        "OnTrigger" "cmdCommandsay << Get Ready to Jump down in 10 seconds ! >>101"
        "OnTrigger" "cmdCommandsay << JUMP NOW ! >>201"
        "OnTrigger" "cmdCommandsay << JUMP NOW ! >>211"
        "OnTrigger" "cmdCommandsay << JUMP NOW ! >>221"
        "OnTrigger" "cmdCommandsay << Doors Open in 20 seconds ! >>301"
        "OnTrigger" "cmdCommandsay << Door Opens in 15 seconds ! >>601"
        "OnTrigger" "cmdCommandsay << FINAL GATE OPENS IN 20 SECONDS ! >>801"
        "OnTrigger" "cmdCommandsay << LAST STAND ! >>1001"
        "OnTrigger" "cmdCommandsay << DO NOT LET ZOMBIES NEAR THE CRYSTAL ! >>1021"
        "OnTrigger" "cmdCommandsay << DO NOT LET ZOMBIES NEAR THE CRYSTAL ! >>1031"
        "OnTrigger" "cmdCommandsay << DO NOT LET ZOMBIES NEAR THE CRYSTAL ! >>1041"
        "OnTrigger" "cmdCommandsay << FINAL GATE CLOSES IN 10 SECONDS ! >>1101"
        "OnTrigger" "cmdCommandsay << AFK Teleport in 10 seconds ! >>751"
    }
}

modify:
{
    match:
    {
        "hammerid" "433791"
    }
    insert:
    {
        "OnTrigger" "cmdCommandsay << Chapter 3 : Wind >>91"
        "OnTrigger" "cmdCommandsay << It seems we are in some ruins devastated by the Wind Spirit >>121"
        "OnTrigger" "cmdCommandsay << It would be wise to watch our step... >>141"
    }
}

modify:
{
    match:
    {
        "hammerid" "371201"
    }
    delete:
    {
        "OnStartTouch" "cmdCommandsay ***wait for 25sec***0-1"
    }
    insert:
    {
        "OnStartTouch" "cmdCommandsay << Platforms leave in 25 seconds >>01"
    }
}

modify:
{
    match:
    {
        "hammerid" "380592"
    }
    delete:
    {
        "OnStartTouch" "cmdCommandsay ***wait for 25 sec***0-1"
    }
    insert:
    {
        "OnStartTouch" "cmdCommandsay << Philia will help us trap the spirit! >>01"
        "OnStartTouch" "cmdCommandsay << Defend for 20 seconds >>51"
        "OnStartTouch" "cmdCommandsay << The Spirit is running away! >>251"
    }
}

modify:
{
    match:
    {
        "hammerid" "389937"
    }
    delete:
    {
        "OnStartTouch" "cmdCommandsay ***wait for 20 sec***0-1"
    }
    insert:
    {
        "OnStartTouch" "cmdCommandsay << Philia will try again! >>01"
        "OnStartTouch" "cmdCommandsay << Defend for 15 seconds >>51"
        "OnStartTouch" "cmdCommandsay << The Spirit is running away! >>201"
        "OnStartTouch" "cmdCommandsay << An air current is coming... >>221"
        "OnStartTouch" "cmdCommandsay << AFK Teleport in 10 seconds >>301"
    }
}

modify:
{
    match:
    {
        "hammerid" "380565"
    }
    delete:
    {
        "OnStartTouch" "cmdCommandsay ***wait for 25sec***0-1"
    }
    insert:
    {
        "OnStartTouch" "cmdCommandsay << Door opens in 25 seconds >>01"
    }
}

modify:
{
    match:
    {
        "hammerid" "379931"
    }
    insert:
    {
        "OnFullyOpen" "cmdCommandsay << The Wind Spirit is charging an attack to push us off ! >>01"
        "OnFullyOpen" "cmdCommandsay << We need to stop it now ! >>31"
    }
}

modify:
{
    match:
    {
        "hammerid" "380900"
    }
    delete:
    {
	"OnHitMin" "cmdCommandsay ***wait for 10 sec***0-1"
    }
    insert:
    {
        "OnHitMin" "cmdCommandsay << You did it! >>01"
        "OnHitMin" "cmdCommandsay << Wait... >>41"
        "OnHitMin" "cmdCommandsay << Something is happening !!! >>81"
        "OnHitMin" "cmdCommandsay << The Wind Spirit ! >>211"
        "OnHitMin" "cmdCommandsay << We must defeat it ! >>241"
    }
}

modify:
{
    match:
    {
        "hammerid" "420566"
    }
    insert:
    {
        "OnHitMax" "cmdCommandsay << The Spirit is Shielded for 10 seconds ! >>01"
        "OnHitMax" "cmdCommandsay << Don't let down your guard ! >>41"
        "OnHitMax" "cmdCommandsay << It's not over yet ! >>71"
        "OnHitMax" "cmdCommandsay << The Shield is broken ! Attack Now ! >>101"
    }
}

modify:
{
    match:
    {
        "hammerid" "433181"
    }
    insert:
    {
        "OnTrigger" "cmdCommandsay << The Spirit is Defeated ! >>01"
        "OnTrigger" "cmdCommandsay << Take the Wind Spirit ! >>31"
        "OnTrigger" "cmdCommandsay << We need to return it to the Crystal ! >>71"
        "OnTrigger" "cmdCommandsay << Get Ready to Jump down in 10 seconds ! >>101"
        "OnTrigger" "cmdCommandsay << JUMP NOW ! >>201"
        "OnTrigger" "cmdCommandsay << JUMP NOW ! >>211"
        "OnTrigger" "cmdCommandsay << Destruction in 130 seconds ! >>251"
        "OnTrigger" "cmdCommandsay << The ruins is collapsing ! >>231"
        "OnTrigger" "cmdCommandsay << Path Opens in 25 seconds ! >>301"
        "OnTrigger" "cmdCommandsay << Path Opens in 20 seconds ! >>701"
        "OnTrigger" "cmdCommandsay << We need to jump down straight ahead, It's the only way ! >>951"
        "OnTrigger" "cmdCommandsay << Get Ready to Jump down in 10 seconds ! >>1001"
        "OnTrigger" "cmdCommandsay << JUMP NOW ! >>1101"
        "OnTrigger" "cmdCommandsay << DO NOT LET ZOMBIES CROSS THE BRIDGES ! >>1201"
        "OnTrigger" "cmdCommandsay << DO NOT LET ZOMBIES CROSS THE BRIDGES ! >>1211"
        "OnTrigger" "cmdCommandsay << DO NOT LET ZOMBIES CROSS THE BRIDGES ! >>1221"
        "OnTrigger" "cmdCommandsay << DESTRUCTION IN 10 SECONDS ! >>1451"
        "OnTrigger" "cmdCommandsay << AFK Teleport in 5 seconds ! >>1151"
    }
}

modify:
{
    match:
    {
        "hammerid" "393385"
    }
    delete:
    {
	"OnTrigger" "cmdCommandsay ***wind generate***0-1"
    }
    insert:
    {
	"OnTrigger" "cmdCommandsay << WIND GENERATE >>0-1"
    }
}

modify:
{
    match:
    {
        "hammerid" "433062"
    }
    delete:
    {
	"OnTrigger" "cmdCommandsay ***wind generate***0-1"
    }
    insert:
    {
	"OnTrigger" "cmdCommandsay << WIND GENERATE >>0-1"
    }
}

modify:
{
    match:
    {
        "hammerid" "393361"
    }
    delete:
    {
	"OnTrigger" "cmdCommandsay ***windrage***0-1"
    }
    insert:
    {
	"OnTrigger" "cmdCommandsay << WIND RAGE >>0-1"
    }
}

modify:
{
    match:
    {
        "hammerid" "433068"
    }
    delete:
    {
	"OnTrigger" "cmdCommandsay ***windrage***0-1"
    }
    insert:
    {
	"OnTrigger" "cmdCommandsay << WIND RAGE >>0-1"
    }
}

modify:
{
    match:
    {
        "hammerid" "433064"
    }
    delete:
    {
	"OnTrigger" "cmdCommandsay ***windcycle***0-1"
    }
    insert:
    {
	"OnTrigger" "cmdCommandsay << WIND CYCLE >>0-1"
    }
}

modify:
{
    match:
    {
        "hammerid" "393381"
    }
    delete:
    {
	"OnTrigger" "cmdCommandsay ***windcycle***0-1"
    }
    insert:
    {
	"OnTrigger" "cmdCommandsay << WIND CYCLE >>0-1"
    }
}

modify:
{
    match:
    {
        "hammerid" "393373"
    }
    delete:
    {
	"OnTrigger" "cmdCommandsay ***windpull***0-1"
    }
    insert:
    {
	"OnTrigger" "cmdCommandsay << WIND PULL >>0-1"
    }
}

modify:
{
    match:
    {
        "hammerid" "433070"
    }
    delete:
    {
	"OnTrigger" "cmdCommandsay ***windpull***0-1"
    }
    insert:
    {
	"OnTrigger" "cmdCommandsay << WIND PULL >>0-1"
    }
}

modify:
{
    match:
    {
        "hammerid" "393377"
    }
    delete:
    {
	"OnTrigger" "cmdCommandsay ***aeolain erosion****0-1"
    }
    insert:
    {
	"OnTrigger" "cmdCommandsay << AEOLAIN EROSION >>0-1"
    }
}

modify:
{
    match:
    {
        "hammerid" "433066"
    }
    delete:
    {
	"OnTrigger" "cmdCommandsay ***aeolain erosion****0-1"
    }
    insert:
    {
	"OnTrigger" "cmdCommandsay << AEOLAIN EROSION >>0-1"
    }
}

modify:
{
    match:
    {
        "hammerid" "540507"
    }
    delete:
    {
        "OnTrigger" "cmdCommandsay ***wait for 30 sec***15-1"
    }
    insert:
    {
        "OnTrigger" "cmdCommandsay << Chapter 4 : Fire >>91"
        "OnTrigger" "cmdCommandsay << Platforms rise in 30 seconds >>151"
    }
}

modify:
{
    match:
    {
        "hammerid" "460178"
    }
    insert:
    {
        "OnFullyOpen" "cmdCommandsay << AFK Teleport in 10 seconds >>01"
    }
}

modify:
{
    match:
    {
        "hammerid" "548590"
    }
    delete:
    {
        "OnStartTouch" "cmdCommandsay ***wait for 25 sec***0-1"
    }
    insert:
    {
        "OnStartTouch" "cmdCommandsay << Gates break in 25 seconds >>01"
    }
}

modify:
{
    match:
    {
        "hammerid" "548649"
    }
    delete:
    {
        "OnStartTouch" "cmdCommandsay ***wait for 30 sec***0-1"
    }
    insert:
    {
        "OnStartTouch" "cmdCommandsay << Platform rises in 30 seconds >>01"
    }
}

modify:
{
    match:
    {
        "hammerid" "512752"
    }
    insert:
    {
        "OnFullyOpen" "cmdCommandsay << AFK Teleport in 5 seconds >>01"
    }
}

modify:
{
    match:
    {
        "hammerid" "548326"
    }
    delete:
    {
        "OnStartTouch" "cmdCommandsay ***wait for 10 sec***0-1"
    }
    insert:
    {
        "OnStartTouch" "cmdCommandsay << Doors open in 10 seconds >>01"
    }
}

modify:
{
    match:
    {
        "hammerid" "548381"
    }
    delete:
    {
        "OnStartTouch" "cmdCommandsay ***wait for 10 sec***0-1"
    }
    insert:
    {
        "OnStartTouch" "cmdCommandsay << Doors open in 10 seconds >>01"
    }
}

modify:
{
    match:
    {
        "hammerid" "548427"
    }
    delete:
    {
        "OnStartTouch" "cmdCommandsay ***wait for 25 sec***0-1"
    }
    insert:
    {
        "OnStartTouch" "cmdCommandsay << The Fire Chamber opens in 25 seconds >>01"
        "OnStartTouch" "cmdCommandsay << Middle door is opening... >>51"
    }
}

modify:
{
    match:
    {
        "hammerid" "540672"
    }
    insert:
    {
        "OnFullyOpen" "cmdCommandsay << DOOR CLOSES IN 10 SECONDS >>01"
    }
}

modify:
{
    match:
    {
        "hammerid" "617863"
    }
    insert:
    {
        "OnTrigger" "cmdCommandsay << It's the Fire Spirit ! >>31"
        "OnTrigger" "cmdCommandsay << We must defeat it ! >>71"
    }
}

modify:
{
    match:
    {
        "hammerid" "591798"
    }
    insert:
    {
        "OnHitMax" "cmdCommandsay << The Spirit is Shielded for 15 seconds ! >>01"
        "OnHitMax" "cmdCommandsay << Don't let down your guard ! >>51"
        "OnHitMax" "cmdCommandsay << It's not over yet ! >>81"
        "OnHitMax" "cmdCommandsay << The Shield is broken ! Attack Now ! >>151"
    }
}

modify:
{
    match:
    {
        "hammerid" "592364"
    }
    insert:
    {
        "OnTrigger" "cmdCommandsay << The Spirit is Defeated ! >>01"
        "OnTrigger" "cmdCommandsay << Retrieve the Fire Spirit ! >>31"
        "OnTrigger" "cmdCommandsay << We have obtained all the Spirits ! >>101"
        "OnTrigger" "cmdCommandsay << Philia will be able to cleanse the world ! >>121"
        "OnTrigger" "cmdCommandsay << We need to hurry back ! >>151"
        "OnTrigger" "cmdCommandsay << Door opens in 10 seconds ! >>201"
        "OnTrigger" "cmdCommandsay << Doors open in 10 seconds ! >>401"
        "OnTrigger" "cmdCommandsay << Doors open in 15 seconds ! >>551"
        "OnTrigger" "cmdCommandsay << Platform leaves in 60 seconds ! >>701"
        "OnTrigger" "cmdCommandsay << DEFEND FOR YOUR LIVES ! >>751"
        "OnTrigger" "cmdCommandsay << DEFEND FOR YOUR LIVES ! >>761"
        "OnTrigger" "cmdCommandsay << DEFEND FOR YOUR LIVES ! >>771"
        "OnTrigger" "cmdCommandsay << Middle door opens in 10 seconds ! >>901"
        "OnTrigger" "cmdCommandsay << The Side walls will break in 10 seconds ! >>1001"
        "OnTrigger" "cmdCommandsay << Platforms will descend in 30 seconds ! >>1501"
        "OnTrigger" "cmdCommandsay << FINALE : Philia >>1801"
        "OnTrigger" "cmdCommandsay << That's it! Philia has received all of the Spirits! >>1951"
        "OnTrigger" "cmdCommandsay << PHILIA IS CLEANSING THE WORLD!! >>2001"
        "OnTrigger" "cmdCommandsay << PHILIA IS CLEANSING THE WORLD!! >>2011"
        "OnTrigger" "cmdCommandsay << DEFEND HER WITH INFINITE AMMO AND IMMUNITY!!>>2021"
        "OnTrigger" "cmdCommandsay << DEFEND HER WITH INFINITE AMMO AND IMMUNITY!!>>2031"
        "OnTrigger" "cmdCommandsay << HOLY IN 45 SECONDS !!>>2051"
        "OnTrigger" "cmdCommandsay << PHILIA IS CLEANSING THE WORLD!!>>2021"
        "OnTrigger" "cmdCommandsay << AFK Teleport in 15 seconds ! >>251"
    }
}

modify:
{
    match:
    {
        "hammerid" "592140"
    }
    delete:
    {
	"OnTrigger" "cmdCommandsay ***firesea***0-1"
    }
    insert:
    {
	"OnTrigger" "cmdCommandsay << FIRE SEA >>0-1"
    }
}

modify:
{
    match:
    {
        "hammerid" "592142"
    }
    delete:
    {
	"OnTrigger" "cmdCommandsay ***firesea***0-1"
    }
    insert:
    {
	"OnTrigger" "cmdCommandsay << FIRE SEA >>0-1"
    }
}

modify:
{
    match:
    {
        "hammerid" "592138"
    }
    delete:
    {
	"OnTrigger" "cmdCommandsay ***ruinflame***0-1"
    }
    insert:
    {
	"OnTrigger" "cmdCommandsay << RUIN FLAME >>0-1"
    }
}

modify:
{
    match:
    {
        "hammerid" "592146"
    }
    delete:
    {
	"OnTrigger" "cmdCommandsay ***ruinflame***0-1"
    }
    insert:
    {
	"OnTrigger" "cmdCommandsay << RUIN FLAME >>0-1"
    }
}

modify:
{
    match:
    {
        "hammerid" "592148"
    }
    delete:
    {
	"OnTrigger" "cmdCommandsay ***ultflame***0-1"
    }
    insert:
    {
	"OnTrigger" "cmdCommandsay << ULTI FLAME >>0-1"
    }
}

modify:
{
    match:
    {
        "hammerid" "592128"
    }
    delete:
    {
	"OnTrigger" "cmdCommandsay ***ultflame***0-1"
    }
    insert:
    {
	"OnTrigger" "cmdCommandsay << ULTI FLAME >>0-1"
    }
}

modify:
{
    match:
    {
        "hammerid" "591802"
    }
    delete:
    {
	"OnTrigger" "cmdCommandsay ***flamestamp***0-1"
    }
    insert:
    {
	"OnTrigger" "cmdCommandsay << FLAME STAMP >>0-1"
    }
}

modify:
{
    match:
    {
        "hammerid" "592150"
    }
    delete:
    {
	"OnTrigger" "cmdCommandsay ***flamestamp***0-1"
    }
    insert:
    {
	"OnTrigger" "cmdCommandsay << FLAME STAMP >>0-1"
    }
}

modify:
{
    match:
    {
        "hammerid" "592144"
    }
    delete:
    {
	"OnTrigger" "cmdCommandsay *** flame element***0-1"
    }
    insert:
    {
	"OnTrigger" "cmdCommandsay << FLAME ELEMENT >>0-1"
    }
}

modify:
{
    match:
    {
        "hammerid" "592136"
    }
    delete:
    {
	"OnTrigger" "cmdCommandsay *** flame element***0-1"
    }
    insert:
    {
	"OnTrigger" "cmdCommandsay << FLAME ELEMENT >>0-1"
    }
}

;Admin buttons stuff
modify:
{
    match:
    {
        "targetname" "stage4button"
	"hammerid" "540439"
    }
    insert:
    {
	"OnPressed" "cmdCommandsay << ADMIN TRIGGERED CHAPTER 4 >>01"
	"OnPressed" "playerRunScriptCodeforeach(k,_ in{SetHealth=0}){if(self.GetTeam()<=3&&self.GetHealth()>0)EntFireByHandle(self, k,(0).tostring(),0,null,null)}41"
    }
}

modify:
{
    match:
    {
        "targetname" "stage3button"
	"hammerid" "396349"
    }
    insert:
    {
	"OnPressed" "cmdCommandsay << ADMIN TRIGGERED CHAPTER 3 >>01"
	"OnPressed" "playerRunScriptCodeforeach(k,_ in{SetHealth=0}){if(self.GetTeam()<=3&&self.GetHealth()>0)EntFireByHandle(self, k,(0).tostring(),0,null,null)}41"
    }
}

modify:
{
    match:
    {
        "targetname" "stage2button"
	"hammerid" "270446"
    }
    insert:
    {
	"OnPressed" "cmdCommandsay << ADMIN TRIGGERED CHAPTER 2 >>01"
	"OnPressed" "playerRunScriptCodeforeach(k,_ in{SetHealth=0}){if(self.GetTeam()<=3&&self.GetHealth()>0)EntFireByHandle(self, k,(0).tostring(),0,null,null)}41"
    }
}

modify:
{
    match:
    {
        "targetname" "stage1button"
	"hammerid" "270442"
    }
    insert:
    {
	"OnPressed" "cmdCommandsay << ADMIN TRIGGERED CHAPTER 1 >>01"
	"OnPressed" "playerRunScriptCodeforeach(k,_ in{SetHealth=0}){if(self.GetTeam()<=3&&self.GetHealth()>0)EntFireByHandle(self, k,(0).tostring(),0,null,null)}41"
    }
}

;Due to new human item placements, disable pickup for zm items on stages 3 & 4 until Elevators leave.
modify:
{
    match:
    {
        "classname" "logic_auto"
    }
    delete:
    {
        "OnMapSpawn" "zmspeedpickStart12-1"
        "OnMapSpawn" "zmicepickStart12-1"
        "OnMapSpawn" "zmhealpickStart12-1"
        "OnMapSpawn" "zmgravitypickStart12-1"
        "OnMapSpawn" "k1makerForceSpawn10-1"
        "OnMapSpawn" "k2makerForceSpawn10-1"
        "OnMapSpawn" "k3makerForceSpawn10-1"
        "OnMapSpawn" "k4makerForceSpawn10-1"
    }
}

modify:
{
    match:
    {
        "targetname" "stage1relay"
        "classname" "logic_relay"
    }
    insert:
    {
        "OnTrigger" "zmspeedpickStart12-1"
        "OnTrigger" "k1makerForceSpawn10-1"
        "OnTrigger" "cmdCommandsay << ZM Items Spawned >>101"
    }
}

modify:
{
    match:
    {
        "targetname" "stage2relay"
        "classname" "logic_relay"
    }
    insert:
    {
        "OnTrigger" "zmspeedpickStart12-1"
        "OnTrigger" "zmicepickStart12-1"
        "OnTrigger" "k1makerForceSpawn10-1"
        "OnTrigger" "k2makerForceSpawn10-1"
        "OnTrigger" "cmdCommandsay << ZM Items Spawned >>101"
    }
}

modify:
{
    match:
    {
        "targetname" "stage3relay"
        "classname" "logic_relay"
    }
    insert:
    {
        "OnTrigger" "zmspeedpickStart27-1"
        "OnTrigger" "zmicepickStart27-1"
        "OnTrigger" "zmhealpickStart27-1"
        "OnTrigger" "k1makerForceSpawn25-1"
        "OnTrigger" "k2makerForceSpawn25-1"
        "OnTrigger" "k3makerForceSpawn25-1"
        "OnTrigger" "cmdCommandsay << ZM Items Spawned >>251"
    }
}

modify:
{
    match:
    {
        "targetname" "stage4relay"
        "classname" "logic_relay"
    }
    insert:
    {
        "OnTrigger" "zmspeedpickStart44-1"
        "OnTrigger" "zmicepickStart44-1"
        "OnTrigger" "zmhealpickStart44-1"
        "OnTrigger" "zmgravitypickStart44-1"
        "OnTrigger" "k1makerForceSpawn42-1"
        "OnTrigger" "k2makerForceSpawn42-1"
        "OnTrigger" "k3makerForceSpawn42-1"
        "OnTrigger" "k4makerForceSpawn42-1"
        "OnTrigger" "cmdCommandsay << ZM Items Spawned >>421"
    }
}

;Add stage 4 lyrics
add:
{
    "origin" "6 6 6"
    "y" "0.6"
    "x" "0.1"
    "targetname" "Lyrics1"
    "message" "Ansâli muné vochi"
    "spawnflags" "1"
    "holdtime" "15"
    "fxtime" "0.25"
    "fadeout" "0.5"
    "fadein" "0.5"
    "effect" "0"
    "color2" "0 0 0"
    "color" "255 255 255"
    "channel" "2"
    "classname" "game_text"
}

add:
{
    "origin" "6 6 6"
    "y" "0.63"
    "x" "0.1"
    "targetname" "Lyrics2"
    "message" "Non maché roupondriji"
    "spawnflags" "1"
    "holdtime" "15"
    "fxtime" "0.25"
    "fadeout" "0.5"
    "fadein" "0.5"
    "effect" "0"
    "color2" "0 0 0"
    "color" "255 255 255"
    "channel" "3"
    "classname" "game_text"
}

add:
{
    "origin" "7 7 7"
    "targetname" "StartSong_Relay"
    "StartDisabled" "0"
    "spawnflags" "0"
    "classname" "logic_relay"
    "OnTrigger" "Lyrics1AddOutputmessage Vontra itray vria jifrai15.8-1"
    "OnTrigger" "Lyrics2AddOutputmessage Metsi zim notra blané23.8-1"
    "OnTrigger" "Lyrics1AddOutputmessage Mukamipa lan tsela juva32.2-1"
    "OnTrigger" "Lyrics2AddOutputmessage Tetrem muvé lampé40.4-1"
    "OnTrigger" "Lyrics1AddOutputmessage Stvu jerou quoi visaumi45.9-1"
    "OnTrigger" "Lyrics2AddOutputmessage C'est rerou vendi50.3-1"
    "OnTrigger" "Lyrics1AddOutputmessage Molour salik poje55.8-1"
    "OnTrigger" "Lyrics2AddOutputmessage J'ai unposé62.3-1"
    "OnTrigger" "Lyrics1AddOutputmessage Asutranoi sacai triamo68-1"
    "OnTrigger" "Lyrics2AddOutputmessage Tsanbala zulvalshi noir audesi75.7-1"
    "OnTrigger" "Lyrics1AddOutputmessage Kyamala ce peuri tetra monda jalou83.6-1"
    "OnTrigger" "Lyrics2AddOutputmessage J'ai avé95.3-1"
    "OnTrigger" "Lyrics1AddOutputmessage Dukuram c'est resté saglaiflai99.3-1"
    "OnTrigger" "Lyrics2AddOutputmessage Ella pestan parta vla lajilai107.4-1"
    "OnTrigger" "Lyrics1AddOutputmessage Ella ma tumai115.3-1"
    "OnTrigger" "Lyrics2AddOutputmessage Flestra trensvé sulavì122.4-1"
    "OnTrigger" "Lyrics1AddOutputmessage Kajivontra la fuli sima132.3-1"
    "OnTrigger" "Lyrics2AddOutputmessage Onpuveni fumye140.5-1"
    "OnTrigger" "Lyrics1AddOutputmessage Estre me tuiha salou si jamai folou146.8-1"
    "OnTrigger" "Lyrics2AddOutputmessage Sové téjeha noir tutrapu155.8-1"
    "OnTrigger" "Lyrics1AddOutputmessage Vuakamépa lan tsela juva163.8-1"
    "OnTrigger" "Lyrics2AddOutputmessage Tetrem muvé lampé171.8-1"
    "OnTrigger" "Lyrics1AddOutputmessage Stvu jerou quoi visaumi178.3-1"
    "OnTrigger" "Lyrics2AddOutputmessage Ce revou vaundi molour salik posé183.8-1"
    "OnTrigger" "Lyrics1AddOutputmessage J'ai unposé193.8-1"
    "OnTrigger" "Lyrics1Display0-1"
    "OnTrigger" "Lyrics2Display7.5-1"
    "OnTrigger" "Lyrics1Display16-1"
    "OnTrigger" "Lyrics2Display24-1"
    "OnTrigger" "Lyrics*AddOutputholdtime 1124.3-1"
    "OnTrigger" "Lyrics1Display32.4-1"
    "OnTrigger" "Lyrics2Display40.6-1"
    "OnTrigger" "Lyrics1Display46.1-1"
    "OnTrigger" "Lyrics2Display50.5-1"
    "OnTrigger" "Lyrics1Display56-1"
    "OnTrigger" "Lyrics2Display62.5-1"
    "OnTrigger" "Lyrics1Display68.2-1"
    "OnTrigger" "Lyrics2Display75.9-1"
    "OnTrigger" "Lyrics1Display83.8-1"
    "OnTrigger" "Lyrics2Display95.5-1"
    "OnTrigger" "Lyrics1Display99.5-1"
    "OnTrigger" "Lyrics2Display107.6-1"
    "OnTrigger" "Lyrics1Display115.5-1"
    "OnTrigger" "Lyrics2Display122.6-1"
    "OnTrigger" "Lyrics1Display132.5-1"
    "OnTrigger" "Lyrics2Display140.7-1"
    "OnTrigger" "Lyrics1Display147-1"
    "OnTrigger" "Lyrics2Display156-1"
    "OnTrigger" "Lyrics1Display164-1"
    "OnTrigger" "Lyrics2Display172-1"
    "OnTrigger" "Lyrics1Display178.5-1"
    "OnTrigger" "Lyrics2Display184-1"
    "OnTrigger" "Lyrics1Display194-1"
}

modify:
{
    match:
    {
        "targetname" "stage4relay"
        "classname" "logic_relay"
    }
    insert:
    {
        "OnTrigger" "StartSong_RelayTrigger1211"
    }
}

modify:
{
    match:
    {
        "targetname" "4bossdoor"
        "classname" "logic_relay"
    }
    insert:
    {
        "OnTrigger" "StartSong_RelayCancelPending7-1"
        "OnTrigger" "Lyrics*Kill7.5-1"
    }
}

;Give zm immunity to all humans on final defense
add:
{
    "model" "*24"
    "targetname" "immun_trigger"
    "StartDisabled" "1"
    "spawnflags" "4097"
    "filtername" "human"
    "origin" "3527.5 -9537 -4186"
    "classname" "trigger_multiple"
    "OnStartTouch" "!activatorSetDamageFilterno_zombies0-1"
}

add:
{
    "origin" "8 8 8"
    "targetname" "no_zombies"
    "Negated" "1"
    "filterteam" "2"
    "classname" "filter_activator_team"
}

modify:
{
    match:
    {
        "targetname" "4bossendrelay"
        "classname" "logic_relay"
    }
    insert:
    {
        "OnTrigger" "immun_triggerEnable2001"
    }
}